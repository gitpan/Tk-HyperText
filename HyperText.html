<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Tk::HyperText - Create and manipulate ROText widgets which render HTML code.</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#widgetspecific_options">WIDGET-SPECIFIC OPTIONS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#widget_methods">WIDGET METHODS</a></li>
	<li><a href="#supported_html">SUPPORTED HTML</a></li>
	<li><a href="#supported_css">SUPPORTED CSS</a></li>
	<li><a href="#images">IMAGES</a></li>
	<li><a href="#example">EXAMPLE</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#changes">CHANGES</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Tk::HyperText - Create and manipulate ROText widgets which render HTML code.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
  my $hypertext = $mw-&gt;Scrolled (&quot;HyperText&quot;,
    -scrollbars   =&gt; 'e',
    -wrap         =&gt; 'word',
    -linkcommand  =&gt; \&amp;onLink,  # what to do when &lt;a&gt; links are clicked
    -titlecommand =&gt; \&amp;onTitle, # what to do when &lt;title&gt;s are found
  )-&gt;pack (-fill =&gt; 'both', -expand =&gt; 1);</pre>
<pre>
  # insert some HTML code
  $hypertext-&gt;insert (&quot;end&quot;,&quot;&lt;body bgcolor=\&quot;black\&quot; text=\&quot;yellow\&quot;&gt;&quot;
    . &quot;Hello, &lt;b&gt;world!&lt;/b&gt;&lt;/body&gt;&quot;);</pre>
<p>
</p>
<hr />
<h1><a name="widgetspecific_options">WIDGET-SPECIFIC OPTIONS</a></h1>
<dl>
<dt><strong><a name="item__2drerender"><strong>-rerender</strong></a></strong>

<dd>
<p>Boolean. When true (the default), the ENTIRE contents of your HyperText widget will
be (re)rendered every time you modify it. In this way, if you insert, e.g. a ``bold''
tag and don't close it, then insert new text, the new text should logically still be
in bold, and it would be when this flag is true.</p>
</dd>
<dd>
<p>When false, only the newly inserted text will be rendered independently of what else
is already there. If re-rendering the page is too slow for you, try disabling this flag.</p>
</dd>
</li>
<dt><strong><a name="item__2dtitlecommand"><strong>-titlecommand</strong></a></strong>

<dd>
<p>This should be a CODEREF pointing to a subroutine that will handle changes in a
page's title. While HTML code is being parsed, when a title tag is found, it will
call this method.</p>
</dd>
<dd>
<p>The callback will received the following variables:</p>
</dd>
<dd>
<pre>
  $widget = a reference to the HyperText widget that wants to set a title.
  $title  = the text in the &lt;title&gt; tag.</pre>
</dd>
</li>
<dt><strong><a name="item__2dlinkcommand"><strong>-linkcommand</strong></a></strong>

<dd>
<p>This should be a CODEREF pointing to a subroutine that will handle the clicking
of hyperlinks.</p>
</dd>
<dd>
<p>The callback will received the following variables:</p>
</dd>
<dd>
<pre>
  $widget = a reference to the HyperText widget that invoked the link.
  $href   = the value of the link's &quot;href&quot; attribute.
  $target = the value of the link's &quot;target&quot; attribute.</pre>
</dd>
</li>
<dt><strong><a name="item__2dattributes"><strong>-attributes</strong></a></strong>

<dd>
<p>This option will allow you to define all of the default settings for the display
of HTML pages. Here's an example:</p>
</dd>
<dd>
<pre>
  my $html = $mw-&gt;Scrolled (&quot;HyperText&quot;,
    -attributes =&gt; {
      body =&gt; {
        bgcolor =&gt; 'white',
        text    =&gt; 'black',
        link    =&gt; 'blue',
        vlink   =&gt; 'purple',
        alink   =&gt; 'red',
      },
      font =&gt; {
        family =&gt; 'Arial',
        size   =&gt; 3,
        color  =&gt; '', # inherit from &lt;body&gt;
        back   =&gt; '', # inherit from &lt;body&gt;
      },
    },
  )-&gt;pack;</pre>
</dd>
</li>
<dt><strong><a name="item__2dbasehref"><strong>-basehref</strong></a></strong>

<dd>
<p>The ``base href'' of the webpages being rendered. This should be the local file
path (ex. ``./demolib''). The base href can be reset using the &lt;base&gt; tag
in a webpage. The base href is used for locating external files, such as images.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Tk::HyperText is a derived Tk::ROText class which supports the automatic rendering
of HTML code. It's designed to be easily useable as a drop-in replacement to any
Tk::ROText widget. Rendering HTML code is as easy as <strong>insert</strong>ing it as raw HTML,
as shown in the synopsis.</p>
<p>
</p>
<hr />
<h1><a name="widget_methods">WIDGET METHODS</a></h1>
<p>In addition to all of the methods exported by Tk::ROText and Tk::Text, the following
methods have special behaviors:</p>
<dl>
<dt><strong><a name="item_insert"><em>$text-&gt;</em><strong>insert</strong> <em>(where, html-code)</em></a></strong>

<dd>
<p>Insert new HTML code, and render it automatically. Note that currently, only inserting
to the ``end'' works. See <a href="#bugs">BUGS</a> below.</p>
</dd>
</li>
<dt><strong><a name="item_delete"><em>$text-&gt;</em><strong>delete</strong> <em>(start, end)</em></a></strong>

<dd>
<p>Delete content from the textbox. Note that currently you can only delete EVERYTHING.
See <a href="#bugs">BUGS</a> below.</p>
</dd>
</li>
<dt><strong><a name="item_get"><em>$text-&gt;</em><strong>get</strong> <em>(start, end)</em></a></strong>

<dd>
<p>Get the HTML code back out of the widget. Note that currently this gets ALL of the code.
See <a href="#bugs">BUGS</a>. This returns the actual HTML code, not just the text that's been rendered.</p>
</dd>
</li>
<dt><strong><a name="item_clear"><em>$text-&gt;</em><strong>clear</strong></a></strong>

<dd>
<p>Clear the entire text widget display.</p>
</dd>
</li>
<dt><strong><a name="item_clearhistory"><em>$text-&gt;</em><strong>clearHistory</strong></a></strong>

<dd>
<p>Clear the history in the text widget. This will make all the links that were ``visited
links'' become ``unvisited links'' again.</p>
</dd>
</li>
<dt><strong><a name="item_namesmode"><em>$text-&gt;</em><strong>namesMode</strong> <em>([new-mode])</em></a></strong>

<dd>
<p>Change the permissions mode. Valid options are <code>allow_all, allow_some, deny_some, deny_all</code>.
The default is <code>allow_all</code>. Returns the current mode.</p>
</dd>
</li>
<dt><strong><a name="item_namesallow"><em>$text-&gt;</em><strong>namesAllow</strong> <em>([tag-list])</em></a></strong>

<dd>
<p>Add the list of tags to the allow list when the permissions mode is set to <code>allow_some</code>, or
removes them from the deny list if the mode is <code>deny_some</code>.</p>
</dd>
<dd>
<pre>
  $hypertext-&gt;namesAllow (&quot;&lt;body&gt;&quot;, &quot;&lt;font&gt;&quot;, &quot;&lt;br&gt;&quot;);</pre>
</dd>
</li>
<dt><strong><a name="item_namesdeny"><em>$text-&gt;</em><strong>namesDeny</strong> <em>([tag-list])</em></a></strong>

<dd>
<p>Add the list of tags to the deny list when the permissions mode is set to <code>deny_some</code>, or
removes them from the allow list if the mode is <code>allow_some</code>.</p>
</dd>
<dd>
<pre>
  $hypertext-&gt;namesDeny (&quot;&lt;img&gt;&quot;, &quot;&lt;hr&gt;&quot;);</pre>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="supported_html">SUPPORTED HTML</a></h1>
<p>The following HTML tags and attributes are fully supported by this module:</p>
<pre>
  &lt;html&gt;, &lt;head&gt;
  &lt;title&gt;      *calls -titlecommand when found
  &lt;link&gt;       (type media href)
  &lt;style&gt;      (type)
  &lt;body&gt;       (bgcolor, link, vlink, alink, text)
  &lt;basefont&gt;   (face, size, color)
  &lt;base&gt;       (href)
  &lt;font&gt;       (face, size, color, back)
  &lt;img&gt;        (src, align, hspace, vspace)*
  &lt;hr&gt;         (size, width)
  &lt;a&gt;          (href, target)
  &lt;ol&gt;, &lt;ul&gt;   (type, start)
  &lt;li&gt;
  &lt;div&gt;        (align=left|center|right)
  &lt;span&gt;
  &lt;blockquote&gt;
  &lt;p&gt;, &lt;br&gt;
  &lt;pre&gt;
  &lt;code&gt;, &lt;tt&gt;, &lt;kbd&gt;, &lt;samp&gt;
  &lt;center&gt;, &lt;right&gt;, &lt;left&gt;
  &lt;h1&gt; - &lt;h6&gt;
  &lt;sup&gt;, &lt;sub&gt;
  &lt;b&gt;, &lt;strong&gt;
  &lt;i&gt;, &lt;em&gt;, &lt;address&gt;, &lt;var&gt;, &lt;cite&gt;, &lt;def&gt;
  &lt;u&gt;, &lt;ins&gt;
  &lt;s&gt;, &lt;del&gt;</pre>
<p>* Image alignment must be ``top'', ``middle'', ``bottom'', or ``baseline''. Tk::Text doesn't
support ``left'' and ``right'' alignments.</p>
<p>
</p>
<hr />
<h1><a name="supported_css">SUPPORTED CSS</a></h1>
<p>CSS support is relatively new as of version 0.05. The following ``kinds'' of CSS are
supported:</p>
<pre>
  External CSS files (&lt;link type=&quot;text/css&quot; href=&quot;external.css&quot;&gt;)
  Internal CSS code (&lt;style type=&quot;text/css&quot;&gt;)</pre>
<p>The following type is <strong>NOT</strong> supported:</p>
<pre>
  Inline CSS (&lt;span style=&quot;...&quot;&gt;)</pre>
<p>As far as the actual CSS code, the following attributes are supported:</p>
<pre>
  background       (only the &quot;color&quot; part)
  background-color
  font-family
  font-size        *
  font-style
  font-weight      (bold, lighter, normal--lighter is the same as normal)
  text-decoration  (none, underline, line-thru)
  text-align       (left, center, right)
  color</pre>
<p>* With <code>font-size</code>, if you don't specify a unit of measurement, it's taken as
a regular HTML font size (range 1 through 6). If you do specify a unit (i.e. px,
pt, em, etc), the font size will be taken as a <strong>point size</strong>.</p>
<p>
</p>
<hr />
<h1><a name="images">IMAGES</a></h1>
<p>A couple of default images were provided within the module (Base64-encoded) to
display when something is wrong with an image in your HTML code.</p>
<p><code>$Tk::HyperText::IMG_BROKEN</code> is the Base64 data for the ``image not found'' image.
It displays as a PNG image of a red ``X'' within a sunken-bordered box.</p>
<p><code>$Tk::HyperText::IMG_INVALID</code> is the Base64 data for the ``invalid image data''
image. It displays as a PNG image of a yellow exclamation mark within a sunken
box.</p>
<p>These images are included in their regular PNG form in the distribution of
Tk::HyperText. You can reset these variables in your program if you'd like to
have customized default images to handle these cases.</p>
<p>
</p>
<hr />
<h1><a name="example">EXAMPLE</a></h1>
<p>Run the `demo.pl` program included in the distribution for a demonstration. It's a
kind of simple web browser that views HTML pages in the ``demolib'' directory, and
supports hyperlinks that link from one page to another.</p>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>As noted above, the <strong>insert</strong> method only inserts at the end, <strong>delete</strong> deletes
everything, and <strong>get</strong> gets everything. I plan on coming up with a way to fix this
in a later version.</p>
<p>There's a minor bug in the counting of alphabetic ordered lists. It counts them
from A to Z, then AA to AY, B, BA to BY, C, CA to CY, D, etc.</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="/Tk/ROText.html">the Tk::ROText manpage</a> and <a href="/Tk/Text.html">the Tk::Text manpage</a>.</p>
<p>
</p>
<hr />
<h1><a name="changes">CHANGES</a></h1>
<p>0.05 July 11, 2007</p>
<pre>
  - Added support for &quot;tag permissions&quot;, so that you can allow/deny specific tags from
    being rendered (i.e. say you're making a chat client which uses HTML and you don't
    want people inserting images into their messages, or style sheets, etc)
  - Added the tags &lt;address&gt;, &lt;var&gt;, &lt;cite&gt;, and &lt;def&gt;.
  - Added the &lt;hr&gt; tag.
  - Added two &quot;default images&quot; that are displayed when an &lt;img&gt; tag tries to show
    an image that couldn't be found, or was found but is a file type that isn't
    supported (e.g. &lt;img src=&quot;index.html&quot;&gt; would show an &quot;invalid image&quot; icon).
  - Bug fix: every opened tag that modifies your style will now copy all the other
    stacks. As a result, opening &lt;font back=&quot;yellow&quot;&gt;, then &lt;font color=&quot;red&quot;&gt;, and
    then closing the red font, will still apply the yellow background to the following
    text. The same is true for every tag.
  - Added some support for Cascading StyleSheets.
  - Added some actual use for the &quot;active link color&quot;: it's used as the hover color
    on links (using it as a true active color is mostly useless, since most of the
    time the page won't remain very long when clicking on a link to even see it)</pre>
<p>0.04 June 23, 2007</p>
<pre>
  - Added support for the &lt;basefont&gt; tag.
  - Added support for &lt;ul&gt;, &lt;ol&gt;, and &lt;li&gt;. I've even extended the HTML specs a
    little and added &quot;diamonds&quot; as a shape for &lt;ul&gt;, and allowed &lt;ul&gt; to specify
    a decimal escape code (&lt;ul type=&quot;#0164&quot;&gt;)
  - Added a &quot;page history&quot;, so that the &quot;visited link color&quot; on pages can actually
    be applied to the links.
  - Fixed the &lt;blockquote&gt; so that the margin applies to the right side as well.</pre>
<p>0.02 June 20, 2007</p>
<pre>
  - Bugfix: on consecutive insert() commands (without clearing it in between),
    the entire content of the HTML already in the widget would be inserted again,
    in addition to the new content. This has been fixed.</pre>
<p>0.01 June 20, 2007</p>
<pre>
  - Initial release.</pre>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Casey Kirsle, &lt;casey at cuvou.net&gt;</p>

</body>

</html>
